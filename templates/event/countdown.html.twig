{% extends 'event/partials/_section_base.html.twig' %}

{% block title %}{{ event.name }}{% endblock %}

{% block section_content %}
<section class="fixed top-0 left-0 w-full h-full  min-h-screen flex items-center justify-center"
         style="
            background-image: url('{{ event.coverImage ? asset('uploads/events/' ~ event.coverImage.imageName) : asset('images/default.webp') }}');
            background-size: cover;
            background-position: center;
            background-repeat: no-repeat;
         ">

    <div class="absolute inset-0 bg-black/50"></div>

    <div class="relative z-10 p-8 rounded-3xl bg-white/20 backdrop-blur-md shadow-xl text-center text-neonBlue w-full max-w-4xl border-2 border-neonBlue">
        <h1 class="text-5xl md:text-7xl font-bold mb-8">La LAN débute dans ...</h1>
        <div id="countdown" class="grid grid-cols-4 gap-6 text-4xl md:text-6xl font-extrabold">
            <div>
                <span id="days">00</span>
                <div class="text-lg font-medium">Jours</div>
            </div>
            <div>
                <span id="hours">00</span>
                <div class="text-lg font-medium">Heures</div>
            </div>
            <div>
                <span id="minutes">00</span>
                <div class="text-lg font-medium">Minutes</div>
            </div>
            <div>
                <span id="seconds">00</span>
                <div class="text-lg font-medium">Secondes</div>
            </div>
        </div>
    </div>
</section>

<script>
const lanDate = new Date("{{ event.startDate|date('Y-m-d H:i:s') }}").getTime();

function updateCountdown() {
    const now = new Date().getTime();
    const distance = lanDate - now;

    if (distance <= 0) {
        document.getElementById('countdown').innerHTML = "<span class='col-span-4 text-5xl md:text-6xl font-bold'>La LAN a commencé !</span>";
        clearInterval(timer);
        return;
    }

    const days = Math.floor(distance / (1000 * 60 * 60 * 24));
    const hours = Math.floor((distance % (1000 * 60 * 60 * 24)) / (1000 * 60 * 60));
    const minutes = Math.floor((distance % (1000 * 60 * 60)) / (1000 * 60));
    const seconds = Math.floor((distance % (1000 * 60)) / 1000);

    document.getElementById('days').textContent = days.toString().padStart(2, '0');
    document.getElementById('hours').textContent = hours.toString().padStart(2, '0');
    document.getElementById('minutes').textContent = minutes.toString().padStart(2, '0');
    document.getElementById('seconds').textContent = seconds.toString().padStart(2, '0');
}

const timer = setInterval(updateCountdown, 1000);
updateCountdown();
</script>
{% endblock %}
