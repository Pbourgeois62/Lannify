{% extends 'base.html.twig' %}

{% block title %}Accueil
{% endblock %}

{% block body %}
	{% if showFeedback %}
		{% include 'home/partials/toasts.html.twig' %}
	{% endif %}
	<div
		class="flex flex-col space-y-12 px-4 md:px-8">

		{# --- Section de bienvenue --- #}
		<section class="flex flex-col items-center justify-center space-y-6 py-8 min-h-100vh text-center">
			<h1 class="text-neonBlue text-4xl font-bold">
				Salut
				{{ app.user.profile.nickname ?? app.user.email }}
			</h1>

			<p class="text-white text-2xl max-w-2xl">
				Pr√™t √†
				<span class="text-neonBlue">organiser</span>,
				<span class="text-electricPurple">rejoindre</span>
				ou
				<span class="text-neonYellow">d√©couvrir</span>
				ta prochaine session gaming ?
			</p>

			{% if not app.user.profile.isNickNameEdited %}
				<div class="flex flex-col sm:flex-row items-center justify-center gap-4">
					<p class="text-white max-w-2xl">
						Ton pseudo est encore par d√©faut. Change-le dans ton profil pour plus de fun !
					</p>
					<a href="{{ path('user_profile') }}" class="btn-primary">‚û°Ô∏è Profil</a>
				</div>
			{% endif %}

			{# --- Badges indicateurs fictifs avant CTA --- #}
			<div class="flex flex-wrap justify-center gap-4 mt-4">
				<span class="badge-success">üéÆ Parties cr√©√©es : 128</span>
				<span class="badge-warning">üñ•Ô∏è LANs organis√©es : 42</span>
				<span class="badge-fun">üë• Membres inscrits : 876</span>
				<span class="badge-fun2">‚ö° Sessions actives : 17</span>
				<span class="badge-success">‚≠ê √âv√©nements sp√©ciaux : 5</span>
			</div>

			{# --- CTA principaux --- #}
			<div class="grid grid-cols-1 sm:grid-cols-3 gap-6 mt-8">
				<div class="glass-modal-success flex flex-col items-center p-6 gap-4">
					<div class="flex flex-col items-center gap-2">
						<img src="{{ asset('images/lan.png') }}" alt="LAN Logo" class="w-12 h-12">
						<h3 class="text-white font-semibold text-lg text-center">Organiser une LAN</h3>
					</div>
					<p class="text-gray-400 text-sm text-center">
						Cr√©ez un √©v√©nement LAN, organisez vos besoins et votre planning facilement depuis notre interface.
					</p>
				</div>

				<div class="glass-modal-success flex flex-col items-center p-6 gap-4 ">
					<div class="flex flex-col items-center gap-2">
						<img src="{{ asset('images/group.png') }}" alt="Groupe Logo" class="w-12 h-12">
						<h3 class="text-white font-semibold text-lg text-center">Organiser une partie en ligne</h3>
					</div>
					<p class="text-gray-400 text-sm text-center">
						Programmez votre session multijoueur en ligne, invitez des participants et gardez le suivi des joueurs inscrits.
					</p>
				</div>

				<div class="glass-modal-success flex flex-col items-center p-6 gap-4 hover:scale-105 transition-transform duration-200">
					<div class="flex flex-col items-center gap-2">
						<img src="{{ asset('images/discord.png') }}" alt="Discord Logo" class="w-12 h-12">
						<h3 class="text-white font-semibold text-lg text-center">Regroupez-vous sur Discord</h3>
					</div>
					<p class="text-gray-400 text-sm text-center">
						Int√©grez automatiquement votre √©v√©nement √† Discord, cr√©ez vos salons vocaux et textuels sur notre serveur, et facilitez la communication entre participants.
					</p>
				</div>
			</div>
		</section>

		<section class="flex flex-col space-y-8 py-12 min-h-[100vh] text-center bg-gray-900 rounded-xl shadow-lg p-6 mt-4">
			<h1 class="text-neonBlue text-4xl font-bold mb-8">
				Rejoindre ou organiser une partie
			</h1>

			<div
				class="grid grid-cols-1 sm:grid-cols-2 gap-8 w-full max-w-6xl mx-auto">
				{# --- Chercher une partie --- #}
				<div class="bg-gray-800 p-8 rounded-2xl shadow-md flex flex-col justify-between items-center text-center hover:shadow-lg hover:scale-[1.02] transition-transform duration-200">
					<div>
						<div class="text-5xl mb-4">üîç</div>
						<h2 class="text-neonBlue text-2xl font-semibold mb-2">Chercher une partie</h2>
						<p class="text-gray-300 mb-6">Explore les sessions publiques et rejoins une partie en quelques clics.</p>
					</div>
					<a href="#" class="btn-primary py-3 px-6 w-full sm:w-auto">Rechercher</a>
				</div>

				{# --- Rejoindre via code priv√© --- #}
				<div class="bg-gray-800 p-8 rounded-2xl shadow-md flex flex-col justify-between items-center text-center hover:shadow-lg hover:scale-[1.02] transition-transform duration-200">
					<div>
						<div class="text-5xl mb-4">üîë</div>
						<h2 class="text-neonBlue text-2xl font-semibold mb-2">Rejoindre via code</h2>
						<p class="text-gray-300 mb-6">Entre un code priv√© pour acc√©der directement √† une session.</p>
					</div>

					{{ form_start(quickAccessForm, {'attr': {'class': 'flex w-full sm:w-auto gap-2 justify-center'}}) }}
					{{ form_widget(quickAccessForm.privateCode, {
				'attr': {
					'placeholder': 'Code priv√©',
					'class': 'input w-40 sm:w-56 text-center'
				}
			}) }}
					<button type="submit" class="btn-primary py-3 px-6 hover:scale-105 transition-transform duration-200">
						Acc√©der
					</button>
					{{ form_end(quickAccessForm) }}
				</div>

				{# --- Organiser une LAN --- #}
				<div class="bg-gray-800 p-8 rounded-2xl shadow-md flex flex-col justify-between items-center text-center hover:shadow-lg hover:scale-[1.02] transition-transform duration-200">
					<div>
						<div class="text-5xl mb-4">üñ•Ô∏è</div>
						<h2 class="text-neonBlue text-2xl font-semibold mb-2">Organiser une LAN</h2>
						<p class="text-gray-300 mb-6">Cr√©e un √©v√©nement local et g√®re les participants facilement.</p>
					</div>
					<a href="{{ path('event_create') }}" class="btn-secondary py-3 px-6 w-full sm:w-auto">Cr√©er une LAN</a>
				</div>

				{# --- Organiser une session en ligne --- #}
				<div class="bg-gray-800 p-8 rounded-2xl shadow-md flex flex-col justify-between items-center text-center hover:shadow-lg hover:scale-[1.02] transition-transform duration-200">
					<div>
						<div class="text-5xl mb-4">üéÆ</div>
						<h2 class="text-neonBlue text-2xl font-semibold mb-2">Session en ligne</h2>
						<p class="text-gray-300 mb-6">Cr√©e une partie multijoueur en ligne et invite tes amis instantan√©ment.</p>
					</div>
					<a href="{{ path('game_session_create') }}" class="btn-primary py-3 px-6 w-full sm:w-auto">Cr√©er une session</a>
				</div>
			</div>
		</section>


		{# --- √âv√©nements √† venir --- #}
		<section class="container mx-auto space-y-8">
			<div>
				{% if openedEvents is not empty %}
					<h2 class="text-neonBlue text-xl font-semibold mb-4">LANs √† venir</h2>
					{% include 'home/partials/_opened_lans_section.html.twig' %}
				{% endif %}
			</div>

			<div>
				{% if gameSessions is not empty %}
					<h2 class="text-neonBlue text-xl font-semibold mb-4">Sessions en ligne √† venir</h2>
					{% include 'home/partials/_game_sessions.html.twig' %}
				{% endif %}
			</div>
		</section>
	</div>
{% endblock %}

{% block modals %}
	{% for gameSession in gameSessions %}
		{% if app.user and app.user == gameSession.organizer %}
			{% include 'home/partials/_delete_game_session_modal.html.twig' with { gameSession: gameSession } %}
		{% endif %}
	{% endfor %}

	{% for event in openedEvents %}
		{% if app.user and app.user == event.organizer %}
			{% include 'home/partials/_delete_event_modal.html.twig' with { event: event } %}
			{% include 'home/partials/_close_event_modal.html.twig' with { event: event } %}
		{% endif %}
	{% endfor %}
{% endblock %}
