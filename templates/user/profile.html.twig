{% extends 'base.html.twig' %}

{% block title %}Mon profil
{% endblock %}

{% block body %}
	<div class="max-w-md mx-auto mt-12 p-6 bg-darkGrey rounded-xl shadow-2xl border-2 border-neonBlue">

		<h1 class="text-3xl font-extrabold text-neonBlue mb-6 text-center drop-shadow-lg">
			Modifier mon profil
		</h1>

		{{ form_start(form, {'attr': {'class': 'space-y-6'}}) }}

		{# Pseudo #}
		<div class="relative">
			{{ form_row(form.nickname, {
                'attr': {
                    'class': 'input text-white placeholder-gray-400 focus:ring-2 focus:ring-neonBlue focus:border-neonBlue'
                },
                'label_attr': {'class': 'block text-sm font-medium text-neonBlue mb-1'}
            }) }}
		</div>

		{# Avatar #}
		<div class="relative">
			{{ form_label(form.avatar, 'Avatar', {'label_attr': {'class': 'block text-sm font-medium text-neonBlue mb-1'}}) }}

			{# Avatar actuel (affichage classique) #}
			{% if form.vars.data and form.vars.data.avatar and form.vars.data.avatar.imageName %}
				<div class="flex items-center justify-center h-64">
					<img src="{{ asset('uploads/events/' ~ form.vars.data.avatar.imageName) }}" alt="Avatar actuel" class="w-auto max-h-64 mb-8">
				</div>

			{% endif %}


			{# Upload stylis√© du sous-champ imageFile #}
			<div class="relative">
				{{ form_widget(form.avatar.imageFile, {            
            'label_attr': {'class': 'sr-only'}
        }) }}
			</div>

			{# Message d'erreur ou aide #}
			{% if form.avatar.vars.errors|length %}
				<p class="text-cyberPink text-sm mt-1">
					{{ form.avatar.vars.errors[0].message }}
				</p>
			{% else %}
				<p class="text-gray-400 text-xs mt-1">
					Taille max 2MB. Formats : jpg, png, webp, gif.
				</p>
			{% endif %}
		</div>


		{# Bouton submit #}
		<button type="submit" class="btn-primary w-full">
			Sauvegarder
		</button>

		{{ form_end(form) }}
	</div>
{% endblock %}
