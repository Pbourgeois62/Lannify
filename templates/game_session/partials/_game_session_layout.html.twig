{# templates/gameSession/home.html.twig #}
{% extends 'base.html.twig' %}

{% block body %}
	<div x-data="{ mobileOpen: false }" class="sticky top-0 z-50 backdrop-blur-md border-b border-cyanShadow/30 shadow-lg shadow-black/20 mb-6">

		<nav class="max-w-7xl mx-auto flex justify-between items-center px-6 py-4 text-white">

			<div class="flex items-center gap-3">
				<!-- Icône maison -->


				<!-- Nom de l'événement cliquable -->
					<a href="{{ path('game_session_show', { id: gameSession.id }) }}" class="text-lg font-semibold tracking-wide text-cyanShadow truncate hover:underline flex items-center gap-2"> <i class="bi bi-house-door text-neonBlue text-2xl"></i>
					{{ gameData.name }}
				</a>
			</div>

			<!-- Liens desktop -->
			<div class="hidden md:flex items-center gap-3">
				{# {% if app.user == gameSession.organizer %}
					<a href="{{ path('game_session_manage', { gameSession: gameSession.id }) }}" class="btn-secondary px-4 py-2">Gestion</a>
				{% endif %} #}

				<!-- Bouton chat -->
				<button id="chat-toggle" class="btn-primary px-4 py-2 ml-3">
					Chat
				</button>
			</div>

			<!-- Bouton burger mobile -->
			<button @click="mobileOpen = !mobileOpen" class="md:hidden text-neonBlue focus:outline-none transition-transform duration-200 hover:scale-110" :aria-expanded="mobileOpen">
				<svg x-show="!mobileOpen" class="w-7 h-7" xmlns="http://www.w3.org/2000/svg" fill="none" viewbox="0 0 24 24" stroke="currentColor">
					<path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4 6h16M4 12h16M4 18h16"/>
				</svg>
				<svg x-show="mobileOpen" x-transition class="w-7 h-7" xmlns="http://www.w3.org/2000/svg" fill="none" viewbox="0 0 24 24" stroke="currentColor">
					<path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M6 18L18 6M6 6l12 12"/>
				</svg>
			</button>
		</nav>

		<!-- Menu mobile -->
		<div x-show="mobileOpen" x-transition.origin.top @click.away="mobileOpen = false" class="md:hidden flex flex-col items-center gap-3 px-6 pb-6 text-white bg-black/50 backdrop-blur-md border-t border-cyanShadow/20">
			{# {% if app.user == gameSession.organizer %}
				<a href="{{ path('game_session_manage', { gameSession: gameSession.id }) }}" class="w-full text-center btn-secondary py-2 rounded-lg">Gestion</a>
			{% endif %} #}
			<button id="chat-toggle-mobile" class="w-full btn-primary py-2 rounded-lg">
				Chat
			</button>
		</div>

		{% include 'partials/_chat.html.twig' with {
    'context': gameSession,
    'contextType': 'game-session'
} %}
	</div>


	{% block gameSession_layout %}
		{% block modals %}{% endblock %}
	{% endblock %}
{% endblock %}
