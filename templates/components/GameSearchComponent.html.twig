<div {{ attributes }}>
    {# --- Champ de recherche --- #}
    {{ form_start(form) }}
        {{ form_row(form.query, {
            'attr': {
                'class': 'input w-full',
                'placeholder': 'Rechercher un jeu...',
                'data-live-action-param': 'search',
                'data-action': 'live#action',
                'data-model': 'query'
            },
            'label_attr': {
                'class': 'block text-sm font-medium text-neonBlue mb-2'
            }
        }) }}
    {{ form_end(form) }}

    {# --- Message d’erreur éventuel --- #}
    {% if errorMessage %}
        <div class="mt-4 flex items-center p-4 mb-4 text-sm text-red-700 border border-red-300 rounded-lg bg-red-50 dark:bg-gray-800 dark:text-red-400 dark:border-red-800" role="alert">
            <svg class="flex-shrink-0 inline w-4 h-4 me-3" aria-hidden="true" xmlns="http://www.w3.org/2000/svg" fill="currentColor" viewBox="0 0 20 20">
                <path d="M10 .5a9.5 9.5 0 1 0 9.5 9.5A9.51 9.51 0 0 0 10 .5ZM9 5a1 1 0 0 1 2 0v5a1 1 0 0 1-2 0V5Zm1 9a1.25 1.25 0 1 1 0-2.5A1.25 1.25 0 0 1 10 14Z"/>
            </svg>
            <span class="sr-only">Erreur</span>
            <div>
                {{ errorMessage }}
            </div>
        </div>
    {% endif %}

    {# --- Résultats de recherche RAWG --- #}
    {% if rawgData.results is defined and rawgData.results is not empty %}
        <div class="mt-4 grid grid-cols-1 sm:grid-cols-2 md:grid-cols-3 lg:grid-cols-4 gap-6">
            {% for g in rawgData.results %}
                <div class="bg-gray-900 shadow-lg rounded-xl overflow-hidden flex flex-col hover:scale-[1.02] transition-transform duration-300">
                    {% if g.background_image %}
                        <img src="{{ g.background_image }}" alt="{{ g.name }}" class="w-full h-48 object-cover">
                    {% else %}
                        <div class="w-full h-48 bg-gray-700 flex items-center justify-center text-gray-400 text-sm italic">
                            Pas d’image
                        </div>
                    {% endif %}
                    <div class="p-4 flex flex-col flex-grow">
                        <p class="font-semibold text-neonBlue text-lg mb-1 truncate">{{ g.name }}</p>
                        {% if g.released %}
                            <p class="text-gray-400 text-sm mb-1">Sortie : {{ g.released|date('d/m/Y') }}</p>
                        {% endif %}
                        <p class="text-gray-400 text-sm mb-3">⭐ {{ g.rating }}/5</p>

                        <button
                            type="button"
                            class="btn-primary mt-auto"
                            data-action="live#action"
                            data-live-action-param="selectGame"
                            data-live-id-param="{{ g.id }}">
                            Sélectionner
                        </button>
                    </div>
                </div>
            {% endfor %}
        </div>
    {% elseif query %}
        <p class="text-gray-400 italic mt-4">Aucun résultat trouvé pour "{{ query }}".</p>
    {% else %}
        <p class="text-gray-400 italic mt-4">Saisissez un nom de jeu pour lancer la recherche.</p>
    {% endif %}
</div>
